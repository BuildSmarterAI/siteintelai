{
  "version": "2.0.0",
  "last_updated": "2025-10-14",
  "changelog": "Major migration: Updated all Houston utility endpoints to HPW Utility Network (geogimstest). Added FACILITYID field. Water: 4→22, Sewer: 23→25, Force: 24→24 (new service), Storm: 7→18. Endpoints now use Scaled Utilities and Stormwater services.",
  "config": {
    "default_timeout_ms": 8000,
    "default_retry_attempts": 3,
    "default_retry_delays_ms": [500, 1000, 2000],
    "default_search_radius_ft": 500,
    "urban_cities": ["Houston", "Dallas", "Austin", "San Antonio"],
    "urban_search_radius_multiplier": 1.6
  },
  "houston": {
    "water": {
      "name": "TCEQ Water Service Areas (Proxy)",
      "url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/TCEQ_Water_Districts/FeatureServer/0/query",
      "outFields": ["PROVIDER_NAME", "DISTRICT_TYPE"],
      "geometryType": "esriGeometryPolygon",
      "crs": 4326,
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "spatialRel": "esriSpatialRelIntersects",
      "notes": "City of Houston water mains are not publicly available. Using TCEQ service area boundaries as proxy for water availability. Polygon intersection query.",
      "test_url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/TCEQ_Water_Districts/FeatureServer/0/query?geometry=-95.3632144,29.7555266&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&outFields=PROVIDER_NAME,DISTRICT_TYPE&f=json",
      "fallback": true,
      "last_validated": "2025-01-10"
    },
    "sewer": {
      "name": "COH Wastewater Gravity Mains (ArcGIS Online)",
      "url": "https://services.arcgis.com/04HiymDgLlsbhaV4/ArcGIS/rest/services/Sewer_Water_Pipe_Network_-_Gravity_Main/FeatureServer/0/query",
      "outFields": ["DIAMETER", "OWNER", "LENGTH", "PLANNUMBER"],
      "geometryType": "esriGeometryPolyline",
      "crs": 2278,
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 600,
      "urban_search_radius_ft": 600,
      "notes": "Migrated from geogimstest to ArcGIS Online production layer. Updated 2023. Layer 0 = Gravity Mains.",
      "test_url": "https://services.arcgis.com/04HiymDgLlsbhaV4/ArcGIS/rest/services/Sewer_Water_Pipe_Network_-_Gravity_Main/FeatureServer/0/query?geometry=-95.3632144,29.7555266&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&distance=50&units=esriSRUnit_Foot&outFields=DIAMETER,OWNER,LENGTH,PLANNUMBER&f=json",
      "last_validated": "2025-01-10"
    },
    "sewer_force": {
      "name": "COH Wastewater Force Mains (ArcGIS Online)",
      "url": "https://services.arcgis.com/04HiymDgLlsbhaV4/ArcGIS/rest/services/Sewer_Water_Pipe_Network_-_Force_Main/FeatureServer/0/query",
      "outFields": ["DIAMETER", "OWNER", "LENGTH", "PLANNUMBER"],
      "geometryType": "esriGeometryPolyline",
      "crs": 2278,
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 400,
      "urban_search_radius_ft": 400,
      "notes": "Force mains (pressurized sewer). Migrated from geogimstest to ArcGIS Online production layer.",
      "test_url": "https://services.arcgis.com/04HiymDgLlsbhaV4/ArcGIS/rest/services/Sewer_Water_Pipe_Network_-_Force_Main/FeatureServer/0/query?geometry=-95.3632144,29.7555266&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&distance=50&units=esriSRUnit_Foot&outFields=DIAMETER,OWNER,LENGTH,PLANNUMBER&f=json",
      "last_validated": "2025-01-10"
    },
    "storm": {
      "name": "TDO Stormdrain Gravity Mains (Production)",
      "url": "https://mapsop1.houstontx.gov/arcgis/rest/services/TDO/StormDrainageUtilityAssets/FeatureServer/7/query",
      "outFields": ["DIAMETER", "MATERIAL", "INSTALL_YEAR"],
      "geometryType": "esriGeometryPolyline",
      "crs": 2278,
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 600,
      "urban_search_radius_ft": 600,
      "notes": "Production endpoint on mapsop1 server. Layer 7 = Stormdrain Gravity Mains. Publicly accessible. Migrated from geogimstest.",
      "test_url": "https://mapsop1.houstontx.gov/arcgis/rest/services/TDO/StormDrainageUtilityAssets/FeatureServer/7/query?geometry=-95.3632144,29.7555266&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&distance=100&units=esriSRUnit_Foot&outFields=DIAMETER,MATERIAL,INSTALL_YEAR&f=json",
      "last_validated": "2025-01-10"
    },
    "traffic": {
      "name": "COH Traffic Counts (Major Thoroughfare ADT)",
      "url": "https://services.arcgis.com/04HiymDgLlsbhaV4/ArcGIS/rest/services/City_of_Houston_Traffic_Counts/FeatureServer/0/query",
      "outFields": ["LOCATION", "ADT_YEAR", "ADT"],
      "geometryType": "esriGeometryPoint",
      "crs": 2278,
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 250,
      "notes": "Annual Daily Traffic counts on major roads. ArcGIS Online layer. New integration.",
      "test_url": "https://services.arcgis.com/04HiymDgLlsbhaV4/ArcGIS/rest/services/City_of_Houston_Traffic_Counts/FeatureServer/0/query?geometry=-95.3632144,29.7555266&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&distance=250&units=esriSRUnit_Foot&outFields=LOCATION,ADT_YEAR,ADT&f=json",
      "last_validated": "2025-01-10"
    }
  },
  "austin": {
    "water": {
      "name": "AWU Waterlines",
      "url": "https://services.arcgis.com/0L95CJ0VTaxqcmED/arcgis/rest/services/AWU_Waterlines/FeatureServer/0/query",
      "outFields": ["DIAMETER", "MATERIAL", "STATUS", "INSTALL_YEAR"],
      "geometryType": "esriGeometryPolyline",
      "crs": "EPSG:4326",
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 500,
      "notes": "Reliable ArcGIS Online endpoint",
      "test_url": "https://services.arcgis.com/0L95CJ0VTaxqcmED/arcgis/rest/services/AWU_Waterlines/FeatureServer/0/query?geometry=-97.7431,30.2672&geometryType=esriGeometryPoint&distance=500&units=esriSRUnit_Foot&outFields=DIAMETER,MATERIAL,STATUS,INSTALL_YEAR&f=json"
    },
    "sewer": {
      "name": "AWU Wastewaterlines",
      "url": "https://services.arcgis.com/0L95CJ0VTaxqcmED/arcgis/rest/services/AWU_Wastewaterlines/FeatureServer/0/query",
      "outFields": ["DIAMETER", "MATERIAL", "STATUS", "INSTALL_YEAR"],
      "geometryType": "esriGeometryPolyline",
      "crs": "EPSG:4326",
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 500,
      "notes": "Reliable ArcGIS Online endpoint",
      "test_url": "https://services.arcgis.com/0L95CJ0VTaxqcmED/arcgis/rest/services/AWU_Wastewaterlines/FeatureServer/0/query?geometry=-97.7431,30.2672&geometryType=esriGeometryPoint&distance=500&units=esriSRUnit_Foot&outFields=DIAMETER,MATERIAL,STATUS,INSTALL_YEAR&f=json"
    },
    "reclaimed": {
      "name": "AWU Reclaimed Waterlines",
      "url": "https://services.arcgis.com/0L95CJ0VTaxqcmED/arcgis/rest/services/AWU_ReclaimedWaterlines/FeatureServer/0/query",
      "outFields": ["DIAMETER", "MATERIAL", "STATUS"],
      "geometryType": "esriGeometryPolyline",
      "crs": "EPSG:4326",
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 500,
      "notes": "Reliable ArcGIS Online endpoint",
      "test_url": "https://services.arcgis.com/0L95CJ0VTaxqcmED/arcgis/rest/services/AWU_ReclaimedWaterlines/FeatureServer/0/query?geometry=-97.7431,30.2672&geometryType=esriGeometryPoint&distance=500&units=esriSRUnit_Foot&outFields=DIAMETER,MATERIAL,STATUS&f=json"
    }
  },
  "harris_county_etj": {
    "mud": {
      "name": "Harris County MUD Boundaries",
      "url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/MUD_Boundaries/FeatureServer/0/query",
      "outFields": ["DISTRICT_NA", "DISTRICT_NO", "AGENCY"],
      "geometryType": "esriGeometryPolygon",
      "crs": "EPSG:4326",
      "timeout_ms": 8000,
      "retry_attempts": 1,
      "retry_delays_ms": [500],
      "notes": "Polygon intersection query",
      "test_url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/MUD_Boundaries/FeatureServer/0/query?geometry=-95.3675,29.7559&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=DISTRICT_NA,DISTRICT_NO,AGENCY&f=json"
    },
    "wcid": {
      "name": "Harris County WCID Boundaries",
      "url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/WCID_Boundaries/FeatureServer/0/query",
      "outFields": ["DISTRICT_NA", "DISTRICT_NO"],
      "geometryType": "esriGeometryPolygon",
      "crs": "EPSG:4326",
      "timeout_ms": 8000,
      "retry_attempts": 1,
      "retry_delays_ms": [500],
      "notes": "Polygon intersection query",
      "test_url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/WCID_Boundaries/FeatureServer/0/query?geometry=-95.3675,29.7559&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=DISTRICT_NA,DISTRICT_NO&f=json"
    },
    "tirz": {
      "name": "Houston TIRZ Boundaries",
      "url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/TIRZ_Boundaries/FeatureServer/0/query",
      "outFields": ["TIRZ_NUM", "TIRZ_NAME"],
      "geometryType": "esriGeometryPolygon",
      "crs": "EPSG:4326",
      "timeout_ms": 8000,
      "retry_attempts": 1,
      "retry_delays_ms": [500],
      "notes": "Polygon intersection query",
      "test_url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/TIRZ_Boundaries/FeatureServer/0/query?geometry=-95.3675,29.7559&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=TIRZ_NUM,TIRZ_NAME&f=json"
    }
  },
  "texas_statewide": {
    "tceq": {
      "name": "TCEQ Water Districts Map Viewer",
      "url": "https://www.tceq.texas.gov/gis/iwudview.html",
      "outFields": [],
      "geometryType": "esriGeometryPolygon",
      "crs": "EPSG:4326",
      "timeout_ms": 0,
      "retry_attempts": 0,
      "retry_delays_ms": [],
      "notes": "Fallback: covers all Texas MUDs, WCIDs, SUDs. Not a REST API, but can be downloaded as shapefiles. Manual lookup only."
    }
  }
}
