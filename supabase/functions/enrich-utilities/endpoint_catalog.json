{
  "version": "2.0.0",
  "last_updated": "2025-10-14",
  "changelog": "Major migration: Updated all Houston utility endpoints to HPW Utility Network (geogimstest). Added FACILITYID field. Water: 4→22, Sewer: 23→25, Force: 24→24 (new service), Storm: 7→18. Endpoints now use Scaled Utilities and Stormwater services.",
  "config": {
    "default_timeout_ms": 8000,
    "default_retry_attempts": 3,
    "default_retry_delays_ms": [500, 1000, 2000],
    "default_search_radius_ft": 500,
    "urban_cities": ["Houston", "Dallas", "Austin", "San Antonio"],
    "urban_search_radius_multiplier": 1.6
  },
  "houston": {
    "water": {
      "name": "HW Drinking Water Pipe Network (Scaled Utilities)",
      "url": "https://geogimstest.houstontx.gov/arcgis/rest/services/HW/WaterUtilitiesScaled/MapServer/22/query",
      "outFields": ["FACILITYID", "DIAMETER", "MATERIAL", "OWNER"],
      "geometryType": "esriGeometryPolyline",
      "crs": 2278,
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 800,
      "urban_search_radius_ft": 800,
      "notes": "HPW Utility Network - Drinking Water Pipe Network (Layer 22) - EPSG:2278 (NAD 1983 StatePlane Texas South Central). Migrated from legacy WaterUNPublic/4 endpoint.",
      "test_url": "https://geogimstest.houstontx.gov/arcgis/rest/services/HW/WaterUtilitiesScaled/MapServer/22/query?geometry=-95.3698,29.7604&geometryType=esriGeometryPoint&inSR=4326&distance=500&units=9002&outFields=FACILITYID,DIAMETER,MATERIAL,OWNER&returnGeometry=true&f=pjson"
    },
    "sewer": {
      "name": "HW Sewer Water Pipe Network - Gravity Main",
      "url": "https://geogimstest.houstontx.gov/arcgis/rest/services/HW/WastewaterUtilitiesScaled/MapServer/25/query",
      "outFields": ["FACILITYID", "DIAMETER", "MATERIAL", "LIFECYCLESTATUS"],
      "geometryType": "esriGeometryPolyline",
      "crs": 2278,
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 600,
      "urban_search_radius_ft": 600,
      "notes": "HPW Utility Network - Sewer Gravity Main (Layer 25) - EPSG:2278. Contains gravity sewer mains for Houston's wastewater collection system. Migrated from WastewaterUtilities/23.",
      "test_url": "https://geogimstest.houstontx.gov/arcgis/rest/services/HW/WastewaterUtilitiesScaled/MapServer/25/query?geometry=-95.3698,29.7604&geometryType=esriGeometryPoint&inSR=4326&distance=300&units=9002&outFields=FACILITYID,DIAMETER,MATERIAL,LIFECYCLESTATUS&returnGeometry=true&f=pjson"
    },
    "sewer_force": {
      "name": "HW Sewer Water Pipe Network - Force Main",
      "url": "https://geogimstest.houstontx.gov/arcgis/rest/services/HW/WastewaterUtilitiesScaled/MapServer/24/query",
      "outFields": ["FACILITYID", "DIAMETER", "MATERIAL", "OWNER"],
      "geometryType": "esriGeometryPolyline",
      "crs": 2278,
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 400,
      "urban_search_radius_ft": 400,
      "notes": "HPW Utility Network - Sewer Force Main (Layer 24) - EPSG:2278. Includes 320+ miles of force mains. Migrated from WastewaterUtilities/24.",
      "test_url": "https://geogimstest.houstontx.gov/arcgis/rest/services/HW/WastewaterUtilitiesScaled/MapServer/24/query?geometry=-95.3698,29.7604&geometryType=esriGeometryPoint&inSR=4326&distance=250&units=9002&outFields=FACILITYID,DIAMETER,MATERIAL,OWNER&returnGeometry=true&f=pjson"
    },
    "storm": {
      "name": "TDO Stormdrain Gravity Mains",
      "url": "https://geogimstest.houstontx.gov/arcgis/rest/services/TDO/StormwaterUtilities/MapServer/18/query",
      "outFields": ["FACILITYID", "PIPEWIDTH", "PIPEHEIGHT", "MATERIAL", "PIPEDIAMETER"],
      "geometryType": "esriGeometryPolyline",
      "crs": 2278,
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 600,
      "urban_search_radius_ft": 600,
      "notes": "HPW TDO - Stormwater Gravity Mains (Layer 18) - EPSG:2278. Field names updated to match Esri Utility Network schema (PIPEWIDTH, PIPEHEIGHT, PIPEDIAMETER).",
      "test_url": "https://geogimstest.houstontx.gov/arcgis/rest/services/TDO/StormwaterUtilities/MapServer/18/query?geometry=-95.3698,29.7604&geometryType=esriGeometryPoint&inSR=4326&distance=300&units=9002&outFields=FACILITYID,WIDTH,HEIGHT,MATERIAL,DIAMETER&returnGeometry=true&f=pjson"
    }
  },
  "austin": {
    "water": {
      "name": "AWU Waterlines",
      "url": "https://services.arcgis.com/0L95CJ0VTaxqcmED/arcgis/rest/services/AWU_Waterlines/FeatureServer/0/query",
      "outFields": ["DIAMETER", "MATERIAL", "STATUS", "INSTALL_YEAR"],
      "geometryType": "esriGeometryPolyline",
      "crs": "EPSG:4326",
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 500,
      "notes": "Reliable ArcGIS Online endpoint",
      "test_url": "https://services.arcgis.com/0L95CJ0VTaxqcmED/arcgis/rest/services/AWU_Waterlines/FeatureServer/0/query?geometry=-97.7431,30.2672&geometryType=esriGeometryPoint&distance=500&units=esriSRUnit_Foot&outFields=DIAMETER,MATERIAL,STATUS,INSTALL_YEAR&f=json"
    },
    "sewer": {
      "name": "AWU Wastewaterlines",
      "url": "https://services.arcgis.com/0L95CJ0VTaxqcmED/arcgis/rest/services/AWU_Wastewaterlines/FeatureServer/0/query",
      "outFields": ["DIAMETER", "MATERIAL", "STATUS", "INSTALL_YEAR"],
      "geometryType": "esriGeometryPolyline",
      "crs": "EPSG:4326",
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 500,
      "notes": "Reliable ArcGIS Online endpoint",
      "test_url": "https://services.arcgis.com/0L95CJ0VTaxqcmED/arcgis/rest/services/AWU_Wastewaterlines/FeatureServer/0/query?geometry=-97.7431,30.2672&geometryType=esriGeometryPoint&distance=500&units=esriSRUnit_Foot&outFields=DIAMETER,MATERIAL,STATUS,INSTALL_YEAR&f=json"
    },
    "reclaimed": {
      "name": "AWU Reclaimed Waterlines",
      "url": "https://services.arcgis.com/0L95CJ0VTaxqcmED/arcgis/rest/services/AWU_ReclaimedWaterlines/FeatureServer/0/query",
      "outFields": ["DIAMETER", "MATERIAL", "STATUS"],
      "geometryType": "esriGeometryPolyline",
      "crs": "EPSG:4326",
      "timeout_ms": 8000,
      "retry_attempts": 3,
      "retry_delays_ms": [500, 1000, 2000],
      "search_radius_ft": 500,
      "notes": "Reliable ArcGIS Online endpoint",
      "test_url": "https://services.arcgis.com/0L95CJ0VTaxqcmED/arcgis/rest/services/AWU_ReclaimedWaterlines/FeatureServer/0/query?geometry=-97.7431,30.2672&geometryType=esriGeometryPoint&distance=500&units=esriSRUnit_Foot&outFields=DIAMETER,MATERIAL,STATUS&f=json"
    }
  },
  "harris_county_etj": {
    "mud": {
      "name": "Harris County MUD Boundaries",
      "url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/MUD_Boundaries/FeatureServer/0/query",
      "outFields": ["DISTRICT_NA", "DISTRICT_NO", "AGENCY"],
      "geometryType": "esriGeometryPolygon",
      "crs": "EPSG:4326",
      "timeout_ms": 8000,
      "retry_attempts": 1,
      "retry_delays_ms": [500],
      "notes": "Polygon intersection query",
      "test_url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/MUD_Boundaries/FeatureServer/0/query?geometry=-95.3675,29.7559&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=DISTRICT_NA,DISTRICT_NO,AGENCY&f=json"
    },
    "wcid": {
      "name": "Harris County WCID Boundaries",
      "url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/WCID_Boundaries/FeatureServer/0/query",
      "outFields": ["DISTRICT_NA", "DISTRICT_NO"],
      "geometryType": "esriGeometryPolygon",
      "crs": "EPSG:4326",
      "timeout_ms": 8000,
      "retry_attempts": 1,
      "retry_delays_ms": [500],
      "notes": "Polygon intersection query",
      "test_url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/WCID_Boundaries/FeatureServer/0/query?geometry=-95.3675,29.7559&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=DISTRICT_NA,DISTRICT_NO&f=json"
    },
    "tirz": {
      "name": "Houston TIRZ Boundaries",
      "url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/TIRZ_Boundaries/FeatureServer/0/query",
      "outFields": ["TIRZ_NUM", "TIRZ_NAME"],
      "geometryType": "esriGeometryPolygon",
      "crs": "EPSG:4326",
      "timeout_ms": 8000,
      "retry_attempts": 1,
      "retry_delays_ms": [500],
      "notes": "Polygon intersection query",
      "test_url": "https://services.arcgis.com/KTcxiTD9dsQwVSFh/arcgis/rest/services/TIRZ_Boundaries/FeatureServer/0/query?geometry=-95.3675,29.7559&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=TIRZ_NUM,TIRZ_NAME&f=json"
    }
  },
  "texas_statewide": {
    "tceq": {
      "name": "TCEQ Water Districts Map Viewer",
      "url": "https://www.tceq.texas.gov/gis/iwudview.html",
      "outFields": [],
      "geometryType": "esriGeometryPolygon",
      "crs": "EPSG:4326",
      "timeout_ms": 0,
      "retry_attempts": 0,
      "retry_delays_ms": [],
      "notes": "Fallback: covers all Texas MUDs, WCIDs, SUDs. Not a REST API, but can be downloaded as shapefiles. Manual lookup only."
    }
  }
}
